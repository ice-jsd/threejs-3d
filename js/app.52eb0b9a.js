(function(){"use strict";var e={4275:function(e,t,o){var n=o(9242),a=o(3396),i=o(7139),r=o(4870),s=o(1114),l=o(4543),c=o(2236),d=o(8552);const u={class:"app-container"},p={key:0,class:"loading-overlay"},w={class:"loading-content"},m=(0,a._)("div",{class:"spinner"},null,-1),h={class:"ui-layer"},f={class:"mode-indicator"},g={class:"tooltip-area"},v={class:"tooltip-status"},b=(0,a._)("div",{class:"tooltip-arrow"},null,-1),y={class:"bottom-toolbar"},x={class:"toolbar-group left"},P=(0,a._)("span",{class:"icon"},"üìÑ",-1),z=(0,a.Uk)(" 2D ËßÜÂõæ "),M=[P,z],D=(0,a._)("span",{class:"icon"},"üßä",-1),k=(0,a.Uk)(" 3D ËßÜÂõæ "),S=[D,k],_={class:"toolbar-group center"},R={key:0,class:"floor-tag"},E={key:1,class:"floor-tag"},L={class:"toolbar-group right"};var Z={setup(e){const t=(0,r.iH)(null),o=(0,r.iH)(!0),P=(0,r.iH)(0),z=(0,r.iH)("exterior"),D=(0,r.iH)("3D"),k=(0,r.iH)(null),Z=(0,r.qj)({visible:!1,x:0,y:0,data:{name:"",area:"",status:""}});let T,A,I,C,O,j,W,F,H,U,q,B,J,K,$=[],N=null,Y=null,G=1.1,Q=.85;const V={camera:{exteriorPos:{x:25,y:20,z:25},fov:60}},X=[{name:"Main Building",pos:{x:0,z:0},isSplit:!0,floors:[{id:"L0",name:"Level 0 (Lobby)",height:4,yPos:2,color:14737632,area:"120„é°",status:"Available"},{id:"L1",name:"Level 1 (Office)",height:4,yPos:6,color:14474460,area:"115„é°",status:"Leased"},{id:"L2",name:"Level 2 (Apartment)",height:4,yPos:10,color:14737632,area:"115„é°",status:"Available"},{id:"Roof",name:"Roof Terrace",height:1,yPos:12.5,color:10526880,area:"400„é°",status:"Common Area",isRoof:!0}],width:8,depth:8},{name:"Side Tower A",pos:{x:-15,z:-5},size:{w:10,h:16,d:10},texture:"./imgs/bedroom/image_2.png"},{name:"Side Tower B",pos:{x:15,z:-2},size:{w:9,h:10,d:9},texture:"./imgs/bedroom/image_2.png"},{name:"Back Tower",pos:{x:5,z:-25},size:{w:12,h:25,d:12},texture:"./imgs/bedroom/image_2.png"}],ee=()=>"2D"===D.value?"2D Âπ≥Èù¢ÂõæÊ®°Âºè":"exterior"===z.value?"3D Âª∫Á≠ëÂ§ñËßÇ":"ÂÆ§ÂÜÖÂÖ®ÊôØ (VR)",te=e=>{D.value=e,oe(),ne()},oe=()=>{if(!j||!B)return;const e=(new s.ZzF).setFromObject(B);if(e.isEmpty())return;const t=new s.Pa4,o=new s.Pa4;e.getSize(t),e.getCenter(o);const n=window.innerWidth/window.innerHeight,a=1.2,i=t.x/2*a,r=t.z/2*a;if(i/r>n){j.left=-i,j.right=i;const e=i/n;j.top=e,j.bottom=-e}else{j.top=r,j.bottom=-r;const e=r*n;j.left=-e,j.right=e}j.near=.1,j.far=2e3,j.position.set(o.x,o.y+200,o.z),j.up.set(0,0,-1),j.lookAt(o),j.updateProjectionMatrix(),H&&(H.target.copy(o),H.update())},ne=()=>{"interior"===z.value?(W=O,U=F):"2D"===D.value?(W=j,U=H):(W=O,U=F),F&&(F.enabled=U===F),H&&(H.enabled=U===H),T&&("2D"===D.value&&"exterior"===z.value?T.fog=null:T.fog=Y)},ae=()=>{T=new s.xsS,T.background=new s.Ilk(1118481),Y=new s.ybr(1118481,20,100),T.fog=Y,O=new s.cPb(V.camera.fov,window.innerWidth/window.innerHeight,.1,1e3),O.position.set(V.camera.exteriorPos.x,V.camera.exteriorPos.y,V.camera.exteriorPos.z),j=new s.iKG(-1,1,1,-1,.1,2e3),j.position.set(0,200,0),j.lookAt(0,0,0),j.updateProjectionMatrix(),A=new s.CP7({antialias:!0,alpha:!0}),A.setSize(window.innerWidth,window.innerHeight),A.setPixelRatio(Math.min(window.devicePixelRatio,2)),A.outputEncoding=s.knz,A.toneMapping=s.LY2,A.toneMappingExposure=1.1,A.physicallyCorrectLights=!0,A.shadowMap.enabled=!0,A.shadowMap.type=s.ntZ,t.value.appendChild(A.domElement),G=A.toneMappingExposure,F=new l.z(O,A.domElement),F.enableDamping=!0,F.dampingFactor=.05,F.maxPolarAngle=Math.PI/2-.05,F.minDistance=5,F.maxDistance=60,H=new l.z(j,A.domElement),H.enableDamping=!0,H.dampingFactor=.08,H.enableRotate=!1,H.enablePan=!0,H.screenSpacePanning=!0,H.minZoom=.5,H.maxZoom=8,H.mouseButtons={LEFT:s.RsA.PAN,MIDDLE:s.RsA.DOLLY,RIGHT:s.RsA.PAN},I=new s.iMs,C=new s.FM8;const e=new s.lLk;e.onProgress=(e,t,o)=>{P.value=Math.floor(t/o*100)},e.onLoad=()=>{o.value=!1,d.ZP.from(O.position,{y:50,duration:1.5,ease:"power3.out"})},ie(),le(e),oe(),ne(),window.addEventListener("resize",ye),window.addEventListener("mousemove",fe),window.addEventListener("click",ge),xe()},ie=()=>{const e=new s.Mig(16777215,.65);T.add(e);const t=new s.Ox3(16777215,2.2);t.position.set(20,30,20),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=220,t.shadow.camera.left=-120,t.shadow.camera.right=120,t.shadow.camera.top=120,t.shadow.camera.bottom=-120,t.shadow.bias=-4e-4,t.shadow.normalBias=.02,t.shadow.radius=3,T.add(t)},re=()=>{const e=document.createElement("canvas");e.width=1024,e.height=1024;const t=e.getContext("2d");t.fillStyle="#1a1a1a",t.fillRect(0,0,1024,1024);for(let a=0;a<5e4;a++)t.fillStyle=Math.random()>.5?"#222":"#111",t.fillRect(1024*Math.random(),1024*Math.random(),2,2);const o=256;t.lineWidth=60,t.strokeStyle="#222",t.beginPath();for(let a=0;a<=1024;a+=o)t.moveTo(a,0),t.lineTo(a,1024),t.moveTo(0,a),t.lineTo(1024,a);t.stroke(),t.strokeStyle="#555",t.lineWidth=2,t.setLineDash([15,15]),t.beginPath();for(let a=0;a<=1024;a+=o)t.moveTo(a,0),t.lineTo(a,1024),t.moveTo(0,a),t.lineTo(1024,a);t.stroke();const n=new s.ROQ(e);return n.encoding=s.knz,n.wrapS=s.rpg,n.wrapT=s.rpg,A&&(n.anisotropy=A.capabilities.getMaxAnisotropy()),n},se=()=>{const e=512,t=document.createElement("canvas");t.width=e,t.height=e;const o=t.getContext("2d"),n=document.createElement("canvas");n.width=e,n.height=e;const a=n.getContext("2d");o.fillStyle="#efefef",o.fillRect(0,0,e,e),a.fillStyle="#808080",a.fillRect(0,0,e,e);for(let s=0;s<12e3;s++){o.fillStyle=Math.random()>.5?"#e6e6e6":"#f8f8f8",o.fillRect(Math.random()*e,Math.random()*e,2,2);const t=118+Math.floor(20*Math.random());a.fillStyle=`rgb(${t},${t},${t})`,a.fillRect(Math.random()*e,Math.random()*e,2,2)}const i=6,r=6,l=18,c=22,d=(e-l*(r+1))/r,u=(e-c*(i+1))/i;for(let s=0;s<i;s++)for(let e=0;e<r;e++){const t=4*(Math.random()-.5),n=4*(Math.random()-.5),i=l+e*(d+l)+t,r=c+s*(u+c)+n;o.fillStyle="#2a2a2a",o.fillRect(i-2,r-2,d+4,u+4);const p=o.createLinearGradient(i,r,i,r+u);p.addColorStop(0,"#1e2a38"),p.addColorStop(.45,"#2f6fa6"),p.addColorStop(1,"#1f4f78"),o.fillStyle=p,o.fillRect(i,r,d,u),o.fillStyle="rgba(255,255,255,0.18)",o.beginPath(),o.moveTo(i+.05*d,r+.05*u),o.lineTo(i+.7*d,r+.05*u),o.lineTo(i+.05*d,r+.65*u),o.fill(),a.fillStyle="#b0b0b0",a.fillRect(i-2,r-2,d+4,u+4),a.fillStyle="#707070",a.fillRect(i,r,d,u)}const p=new s.ROQ(t);p.encoding=s.knz,p.wrapS=s.rpg,p.wrapT=s.rpg;const w=new s.ROQ(n);if(w.wrapS=s.rpg,w.wrapT=s.rpg,A){const e=A.capabilities.getMaxAnisotropy();p.anisotropy=e,w.anisotropy=e}return{colorMap:p,bumpMap:w}},le=e=>{q=new s.ZAu,B=new s.ZAu;const t=new s._12(300,300),o=re();o.repeat.set(20,20);const n=new s.Wid({map:o,roughness:.9,metalness:.1}),a=new s.Kj0(t,n);a.rotation.x=-Math.PI/2,a.receiveShadow=!0,q.add(a),q.add(B);const i=new s.dpR(e),r=new s.anP(A);r.compileEquirectangularShader(),new c.x(e).load("./imgs/hdr/Living.hdr",(e=>{const t=r.fromEquirectangular(e).texture;T.environment=t,e.dispose(),r.dispose()}));const{colorMap:l,bumpMap:d}=se();l.repeat.set(2,1),d.repeat.set(2,1),X.forEach((e=>{if(e.isSplit)e.floors.forEach((t=>{let o,n;if(o=t.isRoof?new s.DvJ(e.width+.5,t.height,e.depth+.5):new s.DvJ(e.width,t.height,e.depth),t.isRoof)n=new s.Wid({color:t.color,roughness:.9});else{const e=new s.Wid({map:l,bumpMap:d,bumpScale:.08,color:16777215,roughness:.42,metalness:0,envMapIntensity:1.2,transparent:!0,opacity:.95}),o=new s.Wid({color:t.color,roughness:.8,transparent:!0,opacity:.95});n=[e,e,o,o,e,e]}const a=new s.Kj0(o,n);a.position.set(e.pos.x,t.yPos,e.pos.z),a.castShadow=!0,a.receiveShadow=!0,a.userData={isFloor:!0,id:t.id,name:t.name,area:t.area,status:t.status,originalColor:t.color,isRoof:!!t.isRoof};const i=new s.TOt(o),r=new s.ejS(i,new s.nls({color:0,transparent:!0,opacity:.2}));r.userData={isOutline:!0,parentMesh:a},a.add(r),t.isRoof||ce(a,e.width,t.height,e.depth,t),B.add(a),$.push(a)}));else{const t=i.load(e.texture);t.encoding=s.knz,t.wrapS=t.wrapT=s.rpg;const o=new s.DvJ(e.size.w,e.size.h,e.size.d),n=new s.Wid({map:t,color:16777215,roughness:.55,metalness:0,envMapIntensity:1}),a=new s.Wid({color:16119285,roughness:.9,metalness:0}),r=[n,n,a,a,n,n],l=new s.Kj0(o,r);l.position.set(e.pos.x,e.size.h/2,e.pos.z),l.castShadow=!0,l.receiveShadow=!0,B.add(l)}})),T.add(q),oe(),de(e)},ce=(e,t,o,n,a)=>{const i=2,r=2.5,l=new s._12(i,r),c=new s.Wid({color:8965375,roughness:.08,metalness:0,envMapIntensity:1.6,side:s.ehD,transparent:!0,opacity:.75,emissive:new s.Ilk(661026),emissiveIntensity:.35}),d=[{x:0,y:0,z:n/2+.05,ry:0},{x:0,y:0,z:-n/2-.05,ry:Math.PI},{x:-t/2-.05,y:0,z:0,ry:-Math.PI/2},{x:t/2+.05,y:0,z:0,ry:Math.PI/2}];d.forEach(((t,o)=>{const n=new s.Kj0(l,c.clone());n.position.set(t.x,t.y,t.z),n.rotation.y=t.ry,n.userData={isWindow:!0,floorId:a.id,floorName:a.name,roomId:`room_${a.id}_${o}`},e.add(n),$.push(n)}))},de=e=>{J=new s.ZAu,J.visible=!1;const t=new s.DvJ(100,100,100);t.scale(1,1,-1);const o=["4_l","4_r","4_u","4_d","4_b","4_f"],n=new s.dpR(e),a=o.map((e=>{const t=n.load(`./imgs/living/${e}.jpg`);return t.encoding=s.knz,"4_u"!==e&&"4_d"!==e||(t.rotation=Math.PI,t.center=new s.FM8(.5,.5)),new s.vBJ({map:t})})),i=new s.Kj0(t,a);J.add(i),T.add(J)},ue=e=>e&&e.userData&&e.userData.isOutline&&e.userData.parentMesh?e.userData.parentMesh:e,pe=e=>e?Array.isArray(e.material)?e.material:e.material?[e.material]:[]:[],we=(e,t,o)=>{const n=pe(e);n.forEach((e=>{e&&(e.transparent=!0,d.ZP.to(e,{opacity:t,duration:o}))}))},me=(e,t,o)=>{const n=pe(e);n.forEach((e=>{e&&e.color&&d.ZP.to(e.color,{r:t.r,g:t.g,b:t.b,duration:o})}))},he=(e,t)=>{const o=pe(e),n=new s.Ilk(e.userData.originalColor),a=new s.Ilk(16777215);if(6===o.length)return[0,1,4,5].forEach((e=>{const n=o[e];n&&n.color&&d.ZP.to(n.color,{r:a.r,g:a.g,b:a.b,duration:t})})),[2,3].forEach((e=>{const a=o[e];a&&a.color&&d.ZP.to(a.color,{r:n.r,g:n.g,b:n.b,duration:t})})),void we(e,.95,t);me(e,n,t),we(e,.95,t)},fe=e=>{if("exterior"!==z.value||"3D"!==D.value)return void(Z.visible=!1);C.x=e.clientX/window.innerWidth*2-1,C.y=-e.clientY/window.innerHeight*2+1,I.setFromCamera(C,O);const t=I.intersectObjects($,!0);if(t.length>0){const o=ue(t[0].object);if(N!==o){if(N)if(N.userData.isWindow){const e=new s.Ilk(8965375);d.ZP.to(N.material.color,{r:e.r,g:e.g,b:e.b,duration:.3}),d.ZP.to(N.material,{opacity:.75,duration:.3}),d.ZP.to(N.scale,{x:1,y:1,duration:.3})}else he(N,.3),d.ZP.to(N.scale,{x:1,z:1,duration:.3});if(N=o,N.userData.isWindow){const e=new s.Ilk(16755200);d.ZP.to(N.material.color,{r:e.r,g:e.g,b:e.b,duration:.3}),d.ZP.to(N.material,{opacity:1,duration:.3}),d.ZP.to(N.scale,{x:1.1,y:1.1,duration:.3}),Z.data={name:"ÁÇπÂáªËøõÂÖ•ÊàøÈó¥",area:N.userData.floorName,status:"VR View"}}else{const e=new s.Ilk(4521864);me(N,e,.3),we(N,.75,.3),d.ZP.to(N.scale,{x:1.02,z:1.02,duration:.3}),Z.data=o.userData}}Z.visible=!0,Z.x=e.clientX+15,Z.y=e.clientY-15}else{if(N){if(N.userData.isWindow){const e=new s.Ilk(8965375);d.ZP.to(N.material.color,{r:e.r,g:e.g,b:e.b,duration:.3}),d.ZP.to(N.material,{opacity:.75,duration:.3}),d.ZP.to(N.scale,{x:1,y:1,duration:.3})}else he(N,.3),d.ZP.to(N.scale,{x:1,z:1,duration:.3});N=null}Z.visible=!1}},ge=e=>{"exterior"===z.value&&"3D"===D.value&&N&&(N.userData.isWindow?ve(N):k.value=N.userData)},ve=e=>{const t=new s.Pa4;e.getWorldPosition(t),d.ZP.to(O.position,{x:t.x,y:t.y,z:t.z+2,duration:1,onComplete:()=>{z.value="interior",q.visible=!1,J.visible=!0,T.background=null,A&&(A.toneMappingExposure=Q),O.position.set(0,0,.1),F.target.set(0,0,0),ne()}})},be=()=>{z.value="exterior",q.visible=!0,J.visible=!1,T.background=new s.Ilk(1118481),A&&(A.toneMappingExposure=G),oe(),ne(),d.ZP.to(O.position,{x:V.camera.exteriorPos.x,y:V.camera.exteriorPos.y,z:V.camera.exteriorPos.z,duration:1.5})},ye=()=>{A&&(O&&(O.aspect=window.innerWidth/window.innerHeight,O.updateProjectionMatrix()),oe(),A.setSize(window.innerWidth,window.innerHeight))},xe=()=>{K=requestAnimationFrame(xe),U&&U.update(),W&&A.render(T,W)};return(0,a.bv)(ae),(0,a.Jd)((()=>{cancelAnimationFrame(K),window.removeEventListener("resize",ye),window.removeEventListener("mousemove",fe),window.removeEventListener("click",ge),F&&F.dispose(),H&&H.dispose(),A&&A.dispose()})),(e,s)=>((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",{class:"canvas-container",ref_key:"container",ref:t},null,512),o.value?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",w,[m,(0,a._)("p",null,"Loading Assets... "+(0,i.zw)(P.value)+"%",1)])])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",h,[(0,a._)("div",f," ÂΩìÂâçÊ®°Âºè: "+(0,i.zw)(ee()),1),(0,r.SU)(Z).visible&&"3D"===D.value&&"exterior"===z.value?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"tooltip-card",style:(0,i.j5)({top:(0,r.SU)(Z).y+"px",left:(0,r.SU)(Z).x+"px"})},[(0,a._)("h3",null,(0,i.zw)((0,r.SU)(Z).data.name),1),(0,a._)("p",g,"üìê "+(0,i.zw)((0,r.SU)(Z).data.area),1),(0,a._)("p",v,"‚óè "+(0,i.zw)((0,r.SU)(Z).data.status),1),b],4)):(0,a.kq)("",!0),(0,a._)("div",y,[(0,a._)("div",x,[(0,a._)("button",{class:(0,i.C_)(["tool-btn",{active:"2D"===D.value}]),onClick:s[0]||(s[0]=e=>te("2D"))},M,2),(0,a._)("button",{class:(0,i.C_)(["tool-btn",{active:"3D"===D.value}]),onClick:s[1]||(s[1]=e=>te("3D"))},S,2)]),(0,a._)("div",_,[k.value?((0,a.wg)(),(0,a.iD)("span",R,"ÂΩìÂâçÈÄâ‰∏≠: "+(0,i.zw)(k.value.name),1)):((0,a.wg)(),(0,a.iD)("span",E,"ËØ∑ÈÄâÊã©Ê•ºÂ±Ç"))]),(0,a._)("div",L,["interior"===z.value?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"tool-btn back-btn",onClick:be}," üö™ ÈÄÄÂá∫ÊàøÈó¥ ")):(0,a.kq)("",!0)])])],512),[[n.F8,!o.value]])]))}};const T=Z;var A=T;(0,n.ri)(A).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,i){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,r=n[0],s=n[1],l=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(l)var d=l(o)}for(t&&t(n);c<r.length;c++)i=r[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self["webpackChunkview360"]=self["webpackChunkview360"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4275)}));n=o.O(n)})();
//# sourceMappingURL=app.52eb0b9a.js.map